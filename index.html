<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Khola Pata | West Bengal Rural Land Bank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --green:#2e7d32;
  --brown:#8d4b20;
  --bg:#f7f7f4;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter,sans-serif;background:var(--bg)}
header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;background:white;box-shadow:0 2px 10px rgba(0,0,0,.08)
}
.brand{display:flex;align-items:center;gap:12px}
.logo{
  width:48px;height:48px;border-radius:10px;
  background:linear-gradient(135deg,var(--green),var(--brown));
  color:#fff;font-weight:800;font-family:"Baloo 2";display:flex;
  align-items:center;justify-content:center
}
.title{font-weight:700}
.subtitle{font-size:12px;color:#555}
.controls input{
  padding:8px;border-radius:6px;border:1px solid #ccc;width:140px
}
button{
  padding:8px 12px;border:none;border-radius:6px;
  background:var(--green);color:#fff;font-weight:600;cursor:pointer
}
main{display:flex;height:calc(100% - 76px)}
.sidebar{
  width:340px;background:#fff;padding:12px;
  overflow:auto;border-right:1px solid #ddd
}
.mapwrap{flex:1}
#map{height:100%;width:100%}
.card{
  background:#fff;padding:10px;border-radius:8px;
  margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,.06)
}
.type{
  display:inline-block;padding:4px 8px;border-radius:12px;
  font-size:12px;color:#fff
}
.farm{background:var(--green)}
.res{background:#0288d1}
.premium{background:#b45309}

.modal-bg{
  position:fixed;inset:0;background:rgba(0,0,0,.45);
  display:flex;align-items:center;justify-content:center
}
.modal{
  background:#fff;padding:16px;border-radius:10px;width:320px
}
.modal input{width:100%;padding:8px;margin-bottom:8px}
footer{
  font-size:12px;color:#666;padding:10px;text-align:center
}
@media(max-width:800px){
  main{flex-direction:column}
  .sidebar{width:100%;height:280px}
}
</style>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo">KP</div>
    <div>
      <div class="title">Khola Pata – Rural Land Bank</div>
      <div class="subtitle">West Bengal | Search land by PIN</div>
    </div>
  </div>
  <div class="controls">
    <input id="pinInput" placeholder="Enter PIN">
    <button onclick="openPin()">Open Area</button>
  </div>
</header>

<main>
  <div class="sidebar">
    <h3>Available Lands</h3>
    <div id="list"></div>
    <p style="font-size:13px;color:#555">
      Click marker → Know price & type.<br>
      Login required to book.
    </p>
  </div>
  <div class="mapwrap">
    <div id="map"></div>
  </div>
</main>

<footer>
  Demo platform • Verify documents offline before purchase
</footer>

<div id="modal"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ===== SAMPLE DATA (EDIT THIS ONLY) =====
const data = {
  "700001":[
    {id:1,title:"Premium Roadside Plot",lat:22.5586,lng:88.3621,price:"12 Lakh",type:"premium"},
    {id:2,title:"Residential Plot",lat:22.5532,lng:88.355,price:"6.5 Lakh",type:"res"}
  ],
  "741123":[
    {id:3,title:"Fertile Farm Land",lat:24.2233,lng:87.878,price:"3 Lakh/acre",type:"farm"}
  ]
};
// ======================================

// Map init
const map = L.map("map").setView([23.5,87.5],7);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

let markers=[];

function openPin(){
  const pin=document.getElementById("pinInput").value.trim();
  const list=document.getElementById("list");
  list.innerHTML="";
  markers.forEach(m=>map.removeLayer(m));
  markers=[];
  if(!data[pin]){
    list.innerHTML="<p>No land listed for this PIN.</p>";
    return;
  }
  data[pin].forEach(p=>{
    const m=L.marker([p.lat,p.lng]).addTo(map);
    m.bindPopup(`<b>${p.title}</b><br>Price: ${p.price}<br>
      <span class="type ${p.type}">${p.type.toUpperCase()}</span><br>
      <button onclick="login()">Know More</button>`);
    markers.push(m);

    list.innerHTML+=`
      <div class="card">
        <b>${p.title}</b><br>
        Price: ${p.price}<br>
        <span class="type ${p.type}">${p.type.toUpperCase()}</span>
      </div>`;
  });
  map.setView([data[pin][0].lat,data[pin][0].lng],13);
}

function login(){
  document.getElementById("modal").innerHTML=`
  <div class="modal-bg">
    <div class="modal">
      <h3>Login to Continue</h3>
      <input placeholder="Phone number">
      <input placeholder="OTP (demo: 1234)">
      <button onclick="book()">Login</button>
    </div>
  </div>`;
}

function book(){
  document.getElementById("modal").innerHTML=`
  <div class="modal-bg">
    <div class="modal">
      <h3>Booking Initiated</h3>
      <p>Booking amount: ₹2000</p>
      <button onclick="closeModal()">Done</button>
    </div>
  </div>`;
}

function closeModal(){
  document.getElementById("modal").innerHTML="";
}
</script>

</body>
</html>
