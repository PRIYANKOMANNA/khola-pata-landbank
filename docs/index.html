<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Khola Pata | Rural Land Exchange</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&family=Inter&display=swap" rel="stylesheet">

<style>
:root{--green:#2e7d32;--bg:#f7f7f4}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter;background:var(--bg)}

header{
  background:var(--green);color:#fff;
  padding:14px 16px;
}
.brand{display:flex;align-items:center;gap:10px}
.logo{
  width:40px;height:40px;border-radius:10px;
  background:#fff;color:var(--green);
  display:flex;align-items:center;justify-content:center;
  font-family:"Baloo 2";font-weight:800
}

.controls{
  position:absolute;left:50%;bottom:20px;
  transform:translateX(-50%);
  background:#fff;border-radius:14px;
  padding:10px;display:flex;gap:8px;
  box-shadow:0 6px 20px rgba(0,0,0,.2)
}
.controls input{padding:8px;border-radius:8px;border:1px solid #ccc;width:120px}
.controls button{padding:8px 14px;border:none;border-radius:8px;background:var(--green);color:#fff}

#map{height:calc(100% - 64px)}

.panel{
  position:absolute;top:80px;left:10px;
  background:#fff;padding:10px;border-radius:10px;
  width:220px;font-size:13px
}
.panel a{display:block;color:var(--green);text-decoration:none;margin-top:6px}
</style>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo">KP</div>
    <div>
      <b>Khola Pata</b><br>
      <small>West Bengal Rural Land Bank</small>
    </div>
  </div>
</header>

<div id="map"></div>

<div class="panel">
  <b>System Access</b>
  <a href="dalal-onboard.html">üßë‚Äçüåæ Dalal Registration</a>
  <a href="admin.html">üõ°Ô∏è Admin Panel</a>
  <a href="blockchain.html">üîó Blockchain Proof</a>
</div>

<div class="controls">
  <input id="pin" placeholder="PIN">
  <button onclick="searchPin()">Explore</button>
  <button onclick="nearMe()">üìç Near Me</button>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const lands=[
 {id:"KP01",title:"Residential Plot",lat:22.4215,lng:87.3221,price:"4.5 Lakh",dalal:"DL001"},
 {id:"KP02",title:"Farm Land",lat:22.4182,lng:87.3284,price:"2 Lakh/acre",dalal:"DL001"}
];

const map=L.map("map").setView([22.42,87.32],13);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
let markers=[];

function clearMap(){markers.forEach(m=>map.removeLayer(m));markers=[];}

function show(list){
 clearMap();
 list.forEach(l=>{
   const m=L.marker([l.lat,l.lng]).addTo(map);
   m.bindPopup(`<b>${l.title}</b><br>‚Çπ ${l.price}<br>
   <button onclick="book('${l.id}')">Contact Local Agent</button>`);
   markers.push(m);
 });
}

function searchPin(){ show(lands); }

function nearMe(){
 if(!navigator.geolocation){alert("Location not supported");return;}
 navigator.geolocation.getCurrentPosition(p=>{
   const lat=p.coords.latitude,lng=p.coords.longitude;
   map.setView([lat,lng],14);
   show(lands); // nearest demo
 });
}

function book(id){
 alert("Booking recorded.\nAgent & Admin notified.\nBooking ID: "+id);
}
</script>
</body>
</html>